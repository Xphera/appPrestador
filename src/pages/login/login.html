<!--
  Generated template for the LoginPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-content padding class="transparent-header" [ngStyle]="{'background-image': 'url(' + backgroundImage +')'}">
  <ion-header no-border>
    <ion-buttons left *ngIf="formulario !='login'">
      <button ion-button icon-only clear (click)="atras()">
          <ion-icon name="md-arrow-back"></ion-icon>
        </button>
    </ion-buttons>
    <ion-navbar transparent>
    </ion-navbar>
  </ion-header>

  <div padding>
    <ion-row>
      <ion-col>
        <img class="logo" src="assets/imgs/logo/logo2.png" />
      </ion-col>
    </ion-row>

    <form [formGroup]="myForm" (ngSubmit)="login" *ngIf="formulario=='login'">
      <ion-row>
        <ion-col>
          <ion-list inset class="no-border">
            <ion-item>
              <ion-label>Usuario</ion-label>
              <ion-input type="text" formControlName="usuario"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label>Contraseña</ion-label>
              <ion-input type="password" formControlName="password"></ion-input>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <button [disabled]="!myForm.valid" ion-button class="login-button" (click)="login()">Login</button>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <div (click)="goToResetPassword()">
            <span>Recuperar contraseña</span>
          </div>
        </ion-col>
      </ion-row>
    </form>

    <form [formGroup]="myFormUsuario" (ngSubmit)="enviaUsuario()" *ngIf="formulario=='usuario'">
      <ion-row>
        <ion-col>
          <ion-list inset class="no-border">
            <ion-item>
              <ion-label>Usuario</ion-label>
              <ion-input type="text" formControlName="usuario"></ion-input>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <button [disabled]="!myFormUsuario.valid" ion-button class="login-button" >Enviar</button>
        </ion-col>
      </ion-row>
    </form>

    <form [formGroup]="myFormCodigo" (ngSubmit)="enviaCodigo()" *ngIf="formulario=='codigo'">
      <ion-row>
        <ion-col>
          <ion-list inset class="no-border">
            <ion-item>
              <ion-label>Usuario</ion-label>
              <ion-input type="text" formControlName="usuario" readonly></ion-input>
            </ion-item>
            <ion-item>
              <ion-label>Código</ion-label>
              <ion-input type="text" formControlName="codigo"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label>Contraseña</ion-label>
              <ion-input type="password" formControlName="password"></ion-input>
            </ion-item>
            <ion-item>
              <ion-label>Confirma contraseña</ion-label>
              <ion-input type="password" formControlName="repeatpassword"></ion-input>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <button [disabled]="!myFormCodigo.valid" ion-button class="login-button">Enviar</button>
        </ion-col>
      </ion-row>
    </form>

  </div>
</ion-content>
